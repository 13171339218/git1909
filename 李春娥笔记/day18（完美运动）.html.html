<html>
<head>
  <title>day18（完美运动）.html</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="523"/>
<h1>day18（完美运动）.html</h1>

<div>
<span><div><font style="font-size: 12pt;">body, td { font-family: 微软雅黑; font-size: 12pt; }</font></div><div><font style="font-size: 12pt;">匀速 ---缓冲  ---多物体</font></div><div><font style="font-size: 12pt;">function move(obj,target,attr){</font></div><div><font style="font-size: 12pt;">    clearInterval(obj.timer)</font></div><div><font style="font-size: 12pt;">    obj.timer = setInterval(function(){</font></div><div><font style="font-size: 12pt;">        if( attr == &quot;opacity&quot; ){</font></div><div><font style="font-size: 12pt;">            var current =parseFloat( getStyle(obj,attr) )*100;</font></div><div><font style="font-size: 12pt;">        }else{</font></div><div><font style="font-size: 12pt;">            var current =parseInt( getStyle(obj,attr) );</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        var speed =(target-current)/10<span style="line-height: 1.45;">;</span></font></div><div><span style="line-height: 1.45;"><font style="font-size: 12pt;">        speed =   speed&gt;0?Math.ceil(speed) : Math.floor(speed)</font></span></div><div><font style="font-size: 12pt;">        if( target==current ){</font></div><div><font style="font-size: 12pt;">            clearInterval(obj.timer)</font></div><div><font style="font-size: 12pt;">        }else{</font></div><div><font style="font-size: 12pt;">            if( attr ==&quot;opacity&quot; ){</font></div><div><font style="font-size: 12pt;">                obj.style[attr] =( current + speed )/100</font></div><div><font style="font-size: 12pt;">            }else{</font></div><div><font style="font-size: 12pt;">                obj.style[attr] = current + speed + &quot;px&quot;</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">            </font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    },30)</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">function getStyle(obj,attr){</font></div><div><font style="font-size: 12pt;">    return getComputedStyle?getComputedStyle(obj,false)[attr]:obj.currentStyle[attr]</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">链式运动 ： 上一个动作完成后进入到下一个动作</font></div><div> <span style="min-height: 21pt; font-size: 18pt; background: rgb(227, 220, 137); color: rgb(149, 163, 171); font-family: consolas;">原理 ： 在函数的参数上添加一个回调函数，上移动作完成后，通过调用回调函数 执行下一个动作</span></div><div><br/></div><div><font style="font-size: 12pt;">完美运动 ： 同时改变多个样式 </font></div><div><font style="font-size: 12pt;">原理 ： 同时传递多个属性和值，通过json对象完成  json = { attr : target }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><br/></div><div><font style="font-size: 12pt;">完美运动构架？</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">    </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">function</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(219, 120, 0); font-size: 18pt;">startMove</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(165, 120, 0); font-size: 18pt;">obj</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">,</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(165, 120, 0); font-size: 18pt;">json</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">,</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(165, 120, 0); font-size: 18pt;">callback</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">       clearInterval(obj.timer)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">       obj.</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(219, 120, 0); font-size: 18pt;">timer</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(219, 120, 0); font-size: 18pt;">setInterval</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">function</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">           </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">var</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">flag</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">true</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(149, 163, 171); font-size: 18pt;">//为true停止计时器</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(1, 1, 1); font-size: 18pt;">           </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">var</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">current</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">0</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">           </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">for</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">var</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">in</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">json</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">if</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">==</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;opacity&quot;</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  current</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">parseFloat( getStyle(obj,</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">)</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">*</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">100</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               }</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">else</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">{</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  current</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">parseInt(getStyle(obj,</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">));</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">var</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">speed</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">json</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">]</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">-</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">current)</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">/</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">10</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               speed</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">speed</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">&gt;</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">0</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">?</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">Math.ceil(speed)</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(62, 75, 83); font-size: 18pt;">:</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">Math.floor(speed);</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">if</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">( current</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">!=</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">json</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">] ){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  flag</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">false</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">if</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">==</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;opacity&quot;</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">console</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">.log( current</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">+</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;------------------&quot;</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">+</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">speed )</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  obj.</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">style</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">]</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(current</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">+</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">speed)</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">/</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">100</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               }</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">else if</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">==</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;zIndex&quot;</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  obj.</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">style</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">]</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">json</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">];</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(62, 75, 83); font-size: 18pt;">    </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(1, 1, 1); font-size: 18pt;">               </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(149, 163, 171); font-size: 18pt;">//默认的zIndex为auto，所以得到的current为NaN，所以下面一系列的计算得到的结果都是NaN，所以如果改变的属性是zIndex，直接把目标值赋给对象就行</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(1, 1, 1); font-size: 18pt;">               </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">}</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">else</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">{</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  obj.</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">style</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">]</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">=</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">current</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">+</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">speed</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">+</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(36, 140, 133); font-size: 18pt;">&quot;px&quot;</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">;</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">           }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">           </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">if</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">( flag ){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(219, 120, 0); font-size: 18pt;">clearInterval</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(obj.timer)</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">if</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">( callback ){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                      callback()</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">                  }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">               }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">       },</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">15</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">);</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">    }</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">    </span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">    </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(149, 163, 171); font-size: 18pt;">//得到内联css，或外部css，或行内对象的样式</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(1, 1, 1); font-size: 18pt;">    </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(54, 75, 192); font-size: 18pt;">function</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(219, 120, 0); font-size: 18pt;">getStyle</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">(</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(165, 120, 0); font-size: 18pt;">obj</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">,</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(165, 120, 0); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">){</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">       </span><span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">return</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">getComputedStyle</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(87, 121, 9); font-size: 18pt;">?</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">window</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">.getComputedStyle(obj,</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(155, 28, 235); font-size: 18pt;">false</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">)[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">]</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(62, 75, 83); font-size: 18pt;">:</span> <span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">obj.currentStyle()[</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(60, 122, 3); font-size: 18pt;">attr</span><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">];</span></div><div style="min-height: 21pt;"><span style="min-height: 21pt; font-family: Consolas; color: rgb(8, 8, 8); font-size: 18pt;">    }</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 